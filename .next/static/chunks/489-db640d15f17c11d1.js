"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[489],{5974:function(e,t,r){r.d(t,{C:function(){return i}});var n=r(7437);r(2265);var a=r(535),o=r(4508);let s=(0,a.j)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:r,...a}=e;return(0,n.jsx)("div",{className:(0,o.cn)(s({variant:r}),t),...a})}},2869:function(e,t,r){r.d(t,{z:function(){return u}});var n=r(7437),a=r(2265),o=r(7053),s=r(535),i=r(4508);let d=(0,s.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90 hover:text-primary-foreground",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),u=a.forwardRef((e,t)=>{let{className:r,variant:a,size:s,asChild:u=!1,...c}=e,l=u?o.g7:"button";return(0,n.jsx)(l,{className:(0,i.cn)(d({variant:a,size:s,className:r})),ref:t,...c})});u.displayName="Button"},6070:function(e,t,r){r.d(t,{Ol:function(){return i},SZ:function(){return u},Zb:function(){return s},aY:function(){return c},ll:function(){return d}});var n=r(7437),a=r(2265),o=r(4508);let s=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,o.cn)("rounded-xl border bg-card text-card-foreground shadow",r),...a})});s.displayName="Card";let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",r),...a})});i.displayName="CardHeader";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,o.cn)("font-semibold leading-none tracking-tight",r),...a})});d.displayName="CardTitle";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",r),...a})});u.displayName="CardDescription";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,o.cn)("p-6 pt-0",r),...a})});c.displayName="CardContent",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,o.cn)("flex items-center p-6 pt-0",r),...a})}).displayName="CardFooter"},6110:function(e,t,r){r.d(t,{$N:function(){return g},Be:function(){return h},Vq:function(){return d},cN:function(){return p},cZ:function(){return f},fK:function(){return m},hg:function(){return u}});var n=r(7437),a=r(2265),o=r(1),s=r(2489),i=r(4508);let d=o.fC,u=o.xz,c=o.h_;o.x8;let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(o.aV,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...a})});l.displayName=o.aV.displayName;let f=a.forwardRef((e,t)=>{let{className:r,children:a,...d}=e;return(0,n.jsxs)(c,{children:[(0,n.jsx)(l,{}),(0,n.jsxs)(o.VY,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...d,children:[a,(0,n.jsxs)(o.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,n.jsx)(s.Z,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});f.displayName=o.VY.displayName;let m=e=>{let{className:t,...r}=e;return(0,n.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...r})};m.displayName="DialogHeader";let p=e=>{let{className:t,...r}=e;return(0,n.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};p.displayName="DialogFooter";let g=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(o.Dx,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",r),...a})});g.displayName=o.Dx.displayName;let h=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(o.dk,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",r),...a})});h.displayName=o.dk.displayName},3146:function(e,t,r){r.d(t,{X:function(){return s}});var n=r(7437),a=r(4508),o=r(9322);function s(e){let{message:t="發生錯誤，請稍後再試",className:r}=e;return(0,n.jsxs)("div",{className:(0,a.cn)("flex items-center gap-2 rounded-md border border-destructive/50 bg-destructive/10 p-4 text-destructive",r),children:[(0,n.jsx)(o.Z,{className:"h-5 w-5"}),(0,n.jsx)("p",{className:"text-sm",children:t})]})}},492:function(e,t,r){r.d(t,{g:function(){return o},h:function(){return s}});var n=r(7437),a=r(4508);function o(e){let{className:t,size:r="md"}=e;return(0,n.jsx)("div",{className:(0,a.cn)("flex items-center justify-center",t),children:(0,n.jsx)("div",{className:(0,a.cn)("animate-spin rounded-full border-2 border-muted border-t-foreground",{sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"}[r])})})}function s(){return(0,n.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,n.jsx)(o,{size:"lg"})})}},2096:function(e,t,r){r.d(t,{AuthProvider:function(){return u},a:function(){return c}});var n=r(7437),a=r(2265),o=r(3301),s=r(4257),i=r(5978);let d=(0,a.createContext)(void 0);function u(e){let{children:t}=e,[r,u]=(0,a.useState)(null),[c,l]=(0,a.useState)(null),[f,m]=(0,a.useState)(!0),p=async e=>{try{let t=await (0,i.QT)((0,i.JU)(s.db,"users",e));if(t.exists()){let e=t.data();return{...e,createdAt:e.createdAt instanceof Date?e.createdAt:new Date(e.createdAt),updatedAt:e.updatedAt instanceof Date?e.updatedAt:new Date(e.updatedAt)}}return null}catch(e){return console.error("Error fetching user data:",e),null}};(0,a.useEffect)(()=>{let e=(0,o.Aj)(s.I,async e=>{u(e),e?l(await p(e.uid)):l(null),m(!1)});return()=>e()},[]);let g=async(e,t)=>{try{let r=await (0,o.e5)(s.I,e,t),n=await p(r.user.uid);l(n)}catch(e){throw Error(e.message||"登入失敗")}},h=async(e,t,r)=>{try{let n=await (0,o.Xb)(s.I,e,t),a={uid:n.user.uid,email:e,role:"volunteer",displayName:r.displayName||"",phone:r.phone||"",age:r.age||"",fields:r.fields||[],skills:r.skills||[],availability:r.availability||[],targetAudience:r.targetAudience||[],goals:r.goals,status:"pending",completedTasks:0,createdAt:new Date,updatedAt:new Date};await (0,i.pl)((0,i.JU)(s.db,"users",n.user.uid),{...a,createdAt:new Date,updatedAt:new Date}),n.user&&!n.user.emailVerified&&await (0,o.w$)(n.user),l(a)}catch(e){throw Error(e.message||"註冊失敗")}},x=async()=>{try{await (0,o.w7)(s.I),l(null)}catch(e){throw Error(e.message||"登出失敗")}},v=async e=>{try{await (0,o.LS)(s.I,e)}catch(e){throw Error(e.message||"發送密碼重置郵件失敗")}},y=async(e,t)=>{try{if(!r||!r.email)throw Error("請先登入");let n=o.w9.credential(r.email,e);await (0,o.aF)(r,n),await (0,o.gQ)(r,t)}catch(e){throw Error(e.message||"修改密碼失敗")}};return(0,n.jsx)(d.Provider,{value:{user:c,firebaseUser:r,loading:f,login:g,register:h,logout:x,sendPasswordReset:v,changePassword:y},children:t})}function c(){let e=(0,a.useContext)(d);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},4257:function(e,t,r){let n;r.d(t,{I:function(){return i},db:function(){return d}});var a=r(738),o=r(3301),s=r(5978);n=0===(0,a.C6)().length?(0,a.ZF)({apiKey:"AIzaSyCRZrcO60pVOmgG2PPE5j-OLAKnsyNQk6A",authDomain:"maan6si6uk1.firebaseapp.com",projectId:"maan6si6uk1",storageBucket:"maan6si6uk1.firebasestorage.app",messagingSenderId:"349293937280",appId:"1:349293937280:web:ca2f091d1107bae7e09c65",measurementId:"G-4LWCWNPHB2"}):(0,a.C6)()[0];let i=(0,o.v0)(n),d=(0,s.ad)(n)},3253:function(e,t,r){r.d(t,{C9:function(){return o},gU:function(){return s},iH:function(){return i}});var n=r(5978),a=r(4257);let o=e=>(null==e?void 0:e.toDate)?e.toDate():e instanceof Date?e:new Date(e);async function s(e,t,r){try{let o=(0,n.JU)(a.db,e,t),s=function(e){let t={};for(let r in e)void 0!==e[r]&&(t[r]=e[r]);return t}(r);await (0,n.r7)(o,{...s,updatedAt:n.EK.now()})}catch(t){throw console.error("Error updating document in ".concat(e,":"),t),t}}async function i(e,t){try{let r=(0,n.JU)(a.db,e,t);await (0,n.oe)(r)}catch(t){throw console.error("Error deleting document from ".concat(e,":"),t),t}}},3612:function(e,t,r){r.d(t,{o:function(){return i}});var n=r(2265),a=r(5978),o=r(4257),s=r(3253);function i(e){let[t,r]=(0,n.useState)([]),[i,d]=(0,n.useState)(!0),[u,c]=(0,n.useState)(null);return(0,n.useEffect)(()=>{if(!e){d(!1);return}let t=(0,a.IO)((0,a.hJ)(o.db,"applications"),(0,a.ar)("volunteerId","==",e),(0,a.Xo)("createdAt","desc")),n=(0,a.cf)(t,e=>{r(e.docs.map(e=>{let t=e.data();return{id:e.id,...t,createdAt:(0,s.C9)(t.createdAt),updatedAt:(0,s.C9)(t.updatedAt),matchedAt:t.matchedAt?(0,s.C9)(t.matchedAt):void 0,completedAt:t.completedAt?(0,s.C9)(t.completedAt):void 0}})),d(!1),c(null)},e=>{console.error("Error fetching applications:",e),c(e),d(!1)});return()=>n()},[e]),{applications:t,loading:i,error:u}}},287:function(e,t,r){r.d(t,{a:function(){return n.a}});var n=r(2096)},4508:function(e,t,r){r.d(t,{cn:function(){return o}});var n=r(1994),a=r(3335);function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,n.W)(t))}},4004:function(e,t,r){r.d(t,{b:function(){return a}});var n=r(4257);async function a(){let e=n.I.currentUser;if(!e)return null;try{return await e.getIdToken()}catch(e){return console.error("Error getting auth token:",e),null}}},9376:function(e,t,r){var n=r(5475);r.o(n,"useParams")&&r.d(t,{useParams:function(){return n.useParams}}),r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}})}}]);