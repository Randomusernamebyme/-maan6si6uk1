(()=>{var e={};e.id=968,e.ids=[968],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},84770:e=>{"use strict";e.exports=require("crypto")},80665:e=>{"use strict";e.exports=require("dns")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},35816:e=>{"use strict";e.exports=require("process")},76162:e=>{"use strict";e.exports=require("stream")},74026:e=>{"use strict";e.exports=require("string_decoder")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},98061:e=>{"use strict";e.exports=require("node:assert")},92761:e=>{"use strict";e.exports=require("node:async_hooks")},72254:e=>{"use strict";e.exports=require("node:buffer")},40027:e=>{"use strict";e.exports=require("node:console")},6005:e=>{"use strict";e.exports=require("node:crypto")},65714:e=>{"use strict";e.exports=require("node:diagnostics_channel")},15673:e=>{"use strict";e.exports=require("node:events")},88849:e=>{"use strict";e.exports=require("node:http")},42725:e=>{"use strict";e.exports=require("node:http2")},87503:e=>{"use strict";e.exports=require("node:net")},38846:e=>{"use strict";e.exports=require("node:perf_hooks")},39630:e=>{"use strict";e.exports=require("node:querystring")},84492:e=>{"use strict";e.exports=require("node:stream")},31764:e=>{"use strict";e.exports=require("node:tls")},41041:e=>{"use strict";e.exports=require("node:url")},47261:e=>{"use strict";e.exports=require("node:util")},93746:e=>{"use strict";e.exports=require("node:util/types")},24086:e=>{"use strict";e.exports=require("node:worker_threads")},65628:e=>{"use strict";e.exports=require("node:zlib")},5044:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>l,routeModule:()=>m,tree:()=>d}),s(58357),s(83733),s(35866);var t=s(23191),i=s(88716),a=s(37922),n=s.n(a),c=s(95231),o={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>c[e]);s.d(r,o);let d=["",{children:["request",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,58357)),"C:\\Users\\annie\\OneDrive\\Desktop\\maan6si6uk1\\app\\request\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,83733)),"C:\\Users\\annie\\OneDrive\\Desktop\\maan6si6uk1\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],l=["C:\\Users\\annie\\OneDrive\\Desktop\\maan6si6uk1\\app\\request\\page.tsx"],u="/request/page",p={require:s,loadChunk:()=>Promise.resolve()},m=new t.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/request/page",pathname:"/request",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},13134:(e,r,s)=>{Promise.resolve().then(s.bind(s,73763)),Promise.resolve().then(s.t.bind(s,79404,23))},73763:(e,r,s)=>{"use strict";s.d(r,{RequestSubmissionForm:()=>N});var t=s(10326),i=s(17577),a=s(35047),n=s(74723),c=s(74064),o=s(770),d=s(90772),l=s(54432),u=s(31048),p=s(68762),m=s(93415),x=s(37859),f=s(66307);function h({trackingNumber:e,onComplete:r}){let[s,a]=(0,i.useState)(!0),[n,c]=(0,i.useState)(!1);return s?t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-background/80 backdrop-blur-sm",children:(0,t.jsxs)("div",{className:`text-center space-y-4 transition-all duration-500 ${n?"opacity-100 scale-100":"opacity-0 scale-95"}`,children:[t.jsx("div",{className:"flex justify-center",children:t.jsx("div",{className:`rounded-full bg-primary p-6 transition-all duration-500 ${n?"scale-100 rotate-0":"scale-0 rotate-180"}`,children:t.jsx(f.Z,{className:"h-16 w-16 text-primary-foreground"})})}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("h2",{className:"text-3xl font-bold",children:"提交成功！"}),e&&(0,t.jsxs)("p",{className:"text-lg text-muted-foreground",children:["追蹤編號：",t.jsx("span",{className:"font-mono font-semibold",children:e})]}),t.jsx("p",{className:"text-lg text-muted-foreground",children:"我們會在 3 個工作日內聯絡您"})]})]})}):null}let j=o.Ry({requesterName:o.Z_().min(1,"請輸入您的稱呼"),requesterPhone:o.Z_().min(1,"請輸入聯絡電話").regex(/^(\+?852[-.\s]?)?[2-9]\d{7}$/,"請輸入有效的香港電話號碼（8位數字）"),requesterAge:o.Km(["12-24","25-37","38-50","51-63","64-76","76或以上"],{required_error:"請選擇年齡範圍"}),requesterDistrict:o.Km(["九龍","港島","新界","離島"],{required_error:"請選擇居住地區"}),description:o.Z_().min(20,"請詳細描述您的需求（至少20個字）"),fields:o.IX(o.Km(["生活助手","社區拍檔","街坊樹窿"])).min(1,"請至少選擇一個幫助範疇"),appreciation:o.Z_().optional()}),g=["生活助手","社區拍檔","街坊樹窿"],v=["12-24","25-37","38-50","51-63","64-76","76或以上"],b=["九龍","港島","新界","離島"];function N(){let e=(0,a.useRouter)(),[r,s]=(0,i.useState)(""),[o,f]=(0,i.useState)(!1),[N,y]=(0,i.useState)(!1),[q,k]=(0,i.useState)(""),{register:w,handleSubmit:_,watch:P,setValue:C,formState:{errors:R}}=(0,n.cI)({resolver:(0,c.F)(j),defaultValues:{fields:[]}}),D=P("fields")||[];P("requesterAge"),P("requesterDistrict");let S=e=>{let r=P("fields")||[];C("fields",r.includes(e)?r.filter(r=>r!==e):[...r,e],{shouldValidate:!0})},E=async e=>{try{s(""),f(!0),y(!1);let r={requester:{name:e.requesterName,phone:e.requesterPhone,age:e.requesterAge,district:e.requesterDistrict},description:e.description,fields:e.fields,appreciation:e.appreciation},t=await fetch("/api/requests/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!t.ok){let e=await t.json();throw Error(e.error||"提交失敗")}let i=await t.json();k(i.trackingNumber||i.id),y(!0)}catch(e){s(e.message||"提交失敗，請稍後再試")}finally{f(!1)}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("form",{onSubmit:_(E),className:"space-y-6",children:[r&&t.jsx(m.X,{message:r}),(0,t.jsxs)("div",{className:"space-y-4",children:[t.jsx("h3",{className:"font-semibold",children:"委托者資料"}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(u._,{htmlFor:"requesterName",children:"點樣稱呼你？ *"}),t.jsx(l.I,{id:"requesterName",...w("requesterName"),placeholder:"您的稱呼",className:"bg-background"}),R.requesterName&&t.jsx("p",{className:"text-sm text-destructive",children:R.requesterName.message})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(u._,{htmlFor:"requesterPhone",children:"留低你嘅聯絡電話 (可WhatsApp) *"}),t.jsx(l.I,{id:"requesterPhone",...w("requesterPhone"),placeholder:"例如：91234567",className:"bg-background"}),R.requesterPhone&&t.jsx("p",{className:"text-sm text-destructive",children:R.requesterPhone.message}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"請輸入8位數字（例如：91234567）"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(u._,{children:"年齡 *"}),t.jsx("div",{className:"space-y-2",children:v.map(e=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"radio",id:`age-${e}`,value:e,...w("requesterAge"),className:"h-4 w-4"}),t.jsx(u._,{htmlFor:`age-${e}`,className:"font-normal cursor-pointer",children:e})]},e))}),R.requesterAge&&t.jsx("p",{className:"text-sm text-destructive",children:R.requesterAge.message})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(u._,{children:"居住地區 *"}),t.jsx("div",{className:"space-y-2",children:b.map(e=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"radio",id:`district-${e}`,value:e,...w("requesterDistrict"),className:"h-4 w-4"}),t.jsx(u._,{htmlFor:`district-${e}`,className:"font-normal cursor-pointer",children:e})]},e))}),R.requesterDistrict&&t.jsx("p",{className:"text-sm text-destructive",children:R.requesterDistrict.message})]})]}),(0,t.jsxs)("div",{className:"space-y-4 border-t pt-4",children:[t.jsx("h3",{className:"font-semibold",children:"需求詳情"}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(u._,{children:"幫助範疇 *"}),t.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"請選擇您需要的幫助範疇（可多選）"}),t.jsx("div",{className:"space-y-2",children:g.map(e=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx(p.X,{id:`field-${e}`,checked:D.includes(e),onCheckedChange:()=>S(e)}),t.jsx(u._,{htmlFor:`field-${e}`,className:"font-normal cursor-pointer",children:e})]},e))}),R.fields&&t.jsx("p",{className:"text-sm text-destructive",children:R.fields.message})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(u._,{htmlFor:"description",children:"有咩煩惱或者需求啊？ *"}),t.jsx("textarea",{id:"description",...w("description"),placeholder:"請詳細描述您的需求（至少20個字）...",rows:6,className:"flex w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50"}),R.description&&t.jsx("p",{className:"text-sm text-destructive",children:R.description.message}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"最少需要20個字"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(u._,{htmlFor:"appreciation",children:"你會用咩形式報答我地嘅義工？例子:心意卡、煮餐飯（選填）"}),t.jsx(l.I,{id:"appreciation",...w("appreciation"),placeholder:"例如：心意卡、煮餐飯",className:"bg-background"})]})]}),t.jsx(d.z,{type:"submit",className:"w-full",disabled:o,children:o?t.jsx(x.g,{size:"sm"}):"提交委托請求"})]}),N&&t.jsx(h,{trackingNumber:q,onComplete:()=>{e.push("/"),e.refresh()}})]})}},68762:(e,r,s)=>{"use strict";s.d(r,{X:()=>D});var t=s(10326),i=s(17577),a=s(48051),n=s(93095),c=s(82561),o=s(52067),d=s(53405),l=s(2566),u=s(9815),p=s(77335),m="Checkbox",[x,f]=(0,n.b)(m),[h,j]=x(m);function g(e){let{__scopeCheckbox:r,checked:s,children:a,defaultChecked:n,disabled:c,form:d,name:l,onCheckedChange:u,required:p,value:x="on",internal_do_not_use_render:f}=e,[j,g]=(0,o.T)({prop:s,defaultProp:n??!1,onChange:u,caller:m}),[v,b]=i.useState(null),[N,y]=i.useState(null),q=i.useRef(!1),k=!v||!!d||!!v.closest("form"),w={checked:j,disabled:c,setChecked:g,control:v,setControl:b,name:l,form:d,value:x,hasConsumerStoppedPropagationRef:q,required:p,defaultChecked:!_(n)&&n,isFormControl:k,bubbleInput:N,setBubbleInput:y};return(0,t.jsx)(h,{scope:r,...w,children:"function"==typeof f?f(w):a})}var v="CheckboxTrigger",b=i.forwardRef(({__scopeCheckbox:e,onKeyDown:r,onClick:s,...n},o)=>{let{control:d,value:l,disabled:u,checked:m,required:x,setControl:f,setChecked:h,hasConsumerStoppedPropagationRef:g,isFormControl:b,bubbleInput:N}=j(v,e),y=(0,a.e)(o,f),q=i.useRef(m);return i.useEffect(()=>{let e=d?.form;if(e){let r=()=>h(q.current);return e.addEventListener("reset",r),()=>e.removeEventListener("reset",r)}},[d,h]),(0,t.jsx)(p.WV.button,{type:"button",role:"checkbox","aria-checked":_(m)?"mixed":m,"aria-required":x,"data-state":P(m),"data-disabled":u?"":void 0,disabled:u,value:l,...n,ref:y,onKeyDown:(0,c.Mj)(r,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,c.Mj)(s,e=>{h(e=>!!_(e)||!e),N&&b&&(g.current=e.isPropagationStopped(),g.current||e.stopPropagation())})})});b.displayName=v;var N=i.forwardRef((e,r)=>{let{__scopeCheckbox:s,name:i,checked:a,defaultChecked:n,required:c,disabled:o,value:d,onCheckedChange:l,form:u,...p}=e;return(0,t.jsx)(g,{__scopeCheckbox:s,checked:a,defaultChecked:n,disabled:o,required:c,onCheckedChange:l,name:i,form:u,value:d,internal_do_not_use_render:({isFormControl:e})=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(b,{...p,ref:r,__scopeCheckbox:s}),e&&(0,t.jsx)(w,{__scopeCheckbox:s})]})})});N.displayName=m;var y="CheckboxIndicator",q=i.forwardRef((e,r)=>{let{__scopeCheckbox:s,forceMount:i,...a}=e,n=j(y,s);return(0,t.jsx)(u.z,{present:i||_(n.checked)||!0===n.checked,children:(0,t.jsx)(p.WV.span,{"data-state":P(n.checked),"data-disabled":n.disabled?"":void 0,...a,ref:r,style:{pointerEvents:"none",...e.style}})})});q.displayName=y;var k="CheckboxBubbleInput",w=i.forwardRef(({__scopeCheckbox:e,...r},s)=>{let{control:n,hasConsumerStoppedPropagationRef:c,checked:o,defaultChecked:u,required:m,disabled:x,name:f,value:h,form:g,bubbleInput:v,setBubbleInput:b}=j(k,e),N=(0,a.e)(s,b),y=(0,d.D)(o),q=(0,l.t)(n);i.useEffect(()=>{if(!v)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,r=!c.current;if(y!==o&&e){let s=new Event("click",{bubbles:r});v.indeterminate=_(o),e.call(v,!_(o)&&o),v.dispatchEvent(s)}},[v,y,o,c]);let w=i.useRef(!_(o)&&o);return(0,t.jsx)(p.WV.input,{type:"checkbox","aria-hidden":!0,defaultChecked:u??w.current,required:m,disabled:x,name:f,value:h,form:g,...r,tabIndex:-1,ref:N,style:{...r.style,...q,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function _(e){return"indeterminate"===e}function P(e){return _(e)?"indeterminate":e?"checked":"unchecked"}w.displayName=k;var C=s(32933),R=s(77863);let D=i.forwardRef(({className:e,...r},s)=>t.jsx(N,{ref:s,className:(0,R.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...r,children:t.jsx(q,{className:(0,R.cn)("flex items-center justify-center text-current"),children:t.jsx(C.Z,{className:"h-4 w-4"})})}));D.displayName=N.displayName},93415:(e,r,s)=>{"use strict";s.d(r,{X:()=>n});var t=s(10326),i=s(77863),a=s(41291);function n({message:e="發生錯誤，請稍後再試",className:r}){return(0,t.jsxs)("div",{className:(0,i.cn)("flex items-center gap-2 rounded-md border border-destructive/50 bg-destructive/10 p-4 text-destructive",r),children:[t.jsx(a.Z,{className:"h-5 w-5"}),t.jsx("p",{className:"text-sm",children:e})]})}},54432:(e,r,s)=>{"use strict";s.d(r,{I:()=>n});var t=s(10326),i=s(17577),a=s(77863);let n=i.forwardRef(({className:e,type:r,...s},i)=>t.jsx("input",{type:r,className:(0,a.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:i,...s}));n.displayName="Input"},31048:(e,r,s)=>{"use strict";s.d(r,{_:()=>d});var t=s(10326),i=s(17577),a=s(29152),n=s(79360),c=s(77863);let o=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=i.forwardRef(({className:e,...r},s)=>t.jsx(a.f,{ref:s,className:(0,c.cn)(o(),e),...r}));d.displayName=a.f.displayName},37859:(e,r,s)=>{"use strict";s.d(r,{g:()=>a,h:()=>n});var t=s(10326),i=s(77863);function a({className:e,size:r="md"}){return t.jsx("div",{className:(0,i.cn)("flex items-center justify-center",e),children:t.jsx("div",{className:(0,i.cn)("animate-spin rounded-full border-2 border-muted border-t-foreground",{sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"}[r])})})}function n(){return t.jsx("div",{className:"flex min-h-screen items-center justify-center",children:t.jsx(a,{size:"lg"})})}},66307:(e,r,s)=>{"use strict";s.d(r,{Z:()=>t});let t=(0,s(62881).Z)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},58357:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>c});var t=s(19510),i=s(57371);let a=(0,s(68570).createProxy)(String.raw`C:\Users\annie\OneDrive\Desktop\maan6si6uk1\components\requests\RequestSubmissionForm.tsx#RequestSubmissionForm`);var n=s(70256);function c(){return t.jsx("div",{className:"container mx-auto px-4 py-8",children:(0,t.jsxs)("div",{className:"max-w-2xl mx-auto",children:[t.jsx("div",{className:"mb-6",children:t.jsx(i.default,{href:"/",className:"text-sm text-muted-foreground hover:text-foreground",children:"← 返回首頁"})}),(0,t.jsxs)(n.Zb,{children:[(0,t.jsxs)(n.Ol,{children:[t.jsx(n.ll,{className:"text-2xl",children:"提交委托請求"}),t.jsx(n.SZ,{children:"請填寫以下資料，我們會盡快為您配對合適的義工"})]}),t.jsx(n.aY,{children:t.jsx(a,{})})]})]})})}},70256:(e,r,s)=>{"use strict";s.d(r,{Zb:()=>o,aY:()=>p,SZ:()=>u,Ol:()=>d,ll:()=>l});var t=s(19510),i=s(71159),a=s(55761),n=s(62386);function c(...e){return(0,n.m6)((0,a.W)(e))}let o=i.forwardRef(({className:e,...r},s)=>t.jsx("div",{ref:s,className:c("rounded-xl border bg-card text-card-foreground shadow",e),...r}));o.displayName="Card";let d=i.forwardRef(({className:e,...r},s)=>t.jsx("div",{ref:s,className:c("flex flex-col space-y-1.5 p-6",e),...r}));d.displayName="CardHeader";let l=i.forwardRef(({className:e,...r},s)=>t.jsx("div",{ref:s,className:c("font-semibold leading-none tracking-tight",e),...r}));l.displayName="CardTitle";let u=i.forwardRef(({className:e,...r},s)=>t.jsx("div",{ref:s,className:c("text-sm text-muted-foreground",e),...r}));u.displayName="CardDescription";let p=i.forwardRef(({className:e,...r},s)=>t.jsx("div",{ref:s,className:c("p-6 pt-0",e),...r}));p.displayName="CardContent",i.forwardRef(({className:e,...r},s)=>t.jsx("div",{ref:s,className:c("flex items-center p-6 pt-0",e),...r})).displayName="CardFooter"},53405:(e,r,s)=>{"use strict";s.d(r,{D:()=>i});var t=s(17577);function i(e){let r=t.useRef({value:e,previous:e});return t.useMemo(()=>(r.current.value!==e&&(r.current.previous=r.current.value,r.current.value=e),r.current.previous),[e])}}};var r=require("../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[276,730,908,899,680],()=>s(5044));module.exports=t})();