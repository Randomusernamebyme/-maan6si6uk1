(()=>{var e={};e.id=745,e.ids=[745],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},84770:e=>{"use strict";e.exports=require("crypto")},80665:e=>{"use strict";e.exports=require("dns")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},35816:e=>{"use strict";e.exports=require("process")},76162:e=>{"use strict";e.exports=require("stream")},74026:e=>{"use strict";e.exports=require("string_decoder")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},98061:e=>{"use strict";e.exports=require("node:assert")},92761:e=>{"use strict";e.exports=require("node:async_hooks")},72254:e=>{"use strict";e.exports=require("node:buffer")},40027:e=>{"use strict";e.exports=require("node:console")},6005:e=>{"use strict";e.exports=require("node:crypto")},65714:e=>{"use strict";e.exports=require("node:diagnostics_channel")},15673:e=>{"use strict";e.exports=require("node:events")},88849:e=>{"use strict";e.exports=require("node:http")},42725:e=>{"use strict";e.exports=require("node:http2")},87503:e=>{"use strict";e.exports=require("node:net")},38846:e=>{"use strict";e.exports=require("node:perf_hooks")},39630:e=>{"use strict";e.exports=require("node:querystring")},84492:e=>{"use strict";e.exports=require("node:stream")},31764:e=>{"use strict";e.exports=require("node:tls")},41041:e=>{"use strict";e.exports=require("node:url")},47261:e=>{"use strict";e.exports=require("node:util")},93746:e=>{"use strict";e.exports=require("node:util/types")},24086:e=>{"use strict";e.exports=require("node:worker_threads")},65628:e=>{"use strict";e.exports=require("node:zlib")},11634:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>c,pages:()=>u,routeModule:()=>x,tree:()=>l}),t(70738),t(37177),t(68032),t(35866),t(83733);var s=t(23191),n=t(88716),a=t(37922),i=t.n(a),o=t(95231),d={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);t.d(r,d);let l=["",{children:["(dashboard)",{children:["volunteer",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,70738)),"C:\\Users\\annie\\OneDrive\\Desktop\\maan6si6uk1\\app\\(dashboard)\\volunteer\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,37177)),"C:\\Users\\annie\\OneDrive\\Desktop\\maan6si6uk1\\app\\(dashboard)\\volunteer\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,68032)),"C:\\Users\\annie\\OneDrive\\Desktop\\maan6si6uk1\\app\\(dashboard)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,83733)),"C:\\Users\\annie\\OneDrive\\Desktop\\maan6si6uk1\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],u=["C:\\Users\\annie\\OneDrive\\Desktop\\maan6si6uk1\\app\\(dashboard)\\volunteer\\page.tsx"],c="/(dashboard)/volunteer/page",p={require:t,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/(dashboard)/volunteer/page",pathname:"/volunteer",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},93883:(e,r,t)=>{Promise.resolve().then(t.bind(t,10653))},58739:(e,r,t)=>{Promise.resolve().then(t.bind(t,33493))},87502:(e,r,t)=>{Promise.resolve().then(t.bind(t,53507))},10653:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>i});var s=t(10326),n=t(46132),a=t(37859);function i({children:e}){let{loading:r}=(0,n.Q)();return r?s.jsx(a.h,{}):s.jsx(s.Fragment,{children:e})}},33493:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>l});var s=t(10326),n=t(46132),a=t(37859),i=t(90434),o=t(35047),d=t(77863);function l({children:e}){let{user:r,loading:t}=(0,n.Q)("volunteer"),l=(0,o.usePathname)();return t?s.jsx(a.h,{}):(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold",children:"義工儀表板"}),r&&(0,s.jsxs)("p",{className:"text-muted-foreground mt-2",children:["歡迎回來，",r.displayName,"！"]})]}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-6",children:[s.jsx("aside",{className:"w-full md:w-64 flex-shrink-0",children:s.jsx("nav",{className:"space-y-1",children:[{href:"/volunteer/dashboard",label:"看板"},{href:"/volunteer/applications",label:"我的報名"},{href:"/volunteer/profile",label:"個人資料"}].map(e=>{let r=l===e.href;return s.jsx(i.default,{href:e.href,className:(0,d.cn)("block px-4 py-2 rounded-md text-sm font-medium transition-colors",r?"bg-primary text-primary-foreground":"text-foreground/60 hover:bg-accent hover:text-accent-foreground"),children:e.label},e.href)})})}),s.jsx("main",{className:"flex-1 min-w-0",children:e})]})]})}},53507:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>f});var s=t(10326),n=t(6173),a=t(33071),i=t(567),o=t(20891),d=t(23424);function l({request:e,onApply:r,showRequesterInfo:t=!1}){let n;return(0,s.jsxs)(a.Zb,{className:"border-2 hover:shadow-lg transition-shadow",children:[s.jsx(a.Ol,{children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx(a.ll,{className:"text-xl mb-2",children:e.fields.join("、")}),(0,s.jsxs)(a.SZ,{children:["創建時間：",(n=e.createdAt,(0,o.WU)(n,"yyyy年MM月dd日",{locale:d.c}))]})]}),s.jsx(i.C,{variant:"open"===e.status?"default":"matched"===e.status?"secondary":"outline",children:"open"===e.status?"開放報名":"matched"===e.status?"已配對":"completed"===e.status?"已完成":"cancelled"===e.status?"已取消":"待審核"})]})}),(0,s.jsxs)(a.aY,{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("h4",{className:"font-semibold mb-2",children:"需求描述"}),s.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:e.description})]}),t&&e.requester&&(0,s.jsxs)("div",{className:"border-t pt-4",children:[s.jsx("h4",{className:"font-semibold mb-2",children:"委托者資訊"}),(0,s.jsxs)("div",{className:"text-sm space-y-1",children:[(0,s.jsxs)("p",{children:[s.jsx("span",{className:"text-muted-foreground",children:"姓名："}),e.requester.name]}),(0,s.jsxs)("p",{children:[s.jsx("span",{className:"text-muted-foreground",children:"電話："}),e.requester.phone]}),(0,s.jsxs)("p",{children:[s.jsx("span",{className:"text-muted-foreground",children:"年齡："}),e.requester.age]}),(0,s.jsxs)("p",{children:[s.jsx("span",{className:"text-muted-foreground",children:"地區："}),e.requester.district]})]})]}),e.appreciation&&(0,s.jsxs)("div",{className:"border-t pt-4",children:[s.jsx("h4",{className:"font-semibold mb-2",children:"回報方式"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e.appreciation})]}),r&&"open"===e.status&&s.jsx("div",{className:"border-t pt-4",children:s.jsx("button",{onClick:()=>r(e.id),className:"w-full bg-primary text-primary-foreground hover:bg-primary/90 px-4 py-2 rounded-md text-sm font-medium transition-colors",children:"報名此委托"})})]})]})}var u=t(37859),c=t(93415),p=t(17577),x=t(71151),m=t(24211),h=t(35047);function f(){let{requests:e,loading:r,error:t}=(0,n.w)("open"),{user:a}=(0,x.a)(),i=(0,h.useRouter)(),[o,d]=(0,p.useState)(null),f=async e=>{if(!a){i.push("/login");return}try{d(e);let r=await (0,m.b)();if(!r)throw Error("請先登入");let t=await fetch("/api/applications",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({requestId:e,volunteerId:a.uid})});if(!t.ok){let e=await t.json();throw Error(e.error||"報名失敗")}i.refresh(),alert("報名成功！")}catch(e){console.error("報名失敗:",e),alert("報名失敗："+(e.message||"請稍後再試"))}finally{d(null)}};return r?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(u.g,{size:"lg"})}):t?s.jsx(c.X,{message:"載入委托列表時發生錯誤"}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[s.jsx("h2",{className:"text-2xl font-bold mb-2",children:"可報名的委托"}),s.jsx("p",{className:"text-muted-foreground",children:"以下是目前開放報名的委托，您可以選擇適合的委托進行報名。"})]}),0===e.length?s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-muted-foreground",children:"目前沒有開放報名的委托"})}):s.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:e.map(e=>s.jsx(l,{request:e,onApply:f,showRequesterInfo:!1},e.id))})]})}},567:(e,r,t)=>{"use strict";t.d(r,{C:()=>o});var s=t(10326);t(17577);var n=t(79360),a=t(77863);let i=(0,n.j)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o({className:e,variant:r,...t}){return s.jsx("div",{className:(0,a.cn)(i({variant:r}),e),...t})}},33071:(e,r,t)=>{"use strict";t.d(r,{Ol:()=>o,SZ:()=>l,Zb:()=>i,aY:()=>u,ll:()=>d});var s=t(10326),n=t(17577),a=t(77863);let i=n.forwardRef(({className:e,...r},t)=>s.jsx("div",{ref:t,className:(0,a.cn)("rounded-xl border bg-card text-card-foreground shadow",e),...r}));i.displayName="Card";let o=n.forwardRef(({className:e,...r},t)=>s.jsx("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",e),...r}));o.displayName="CardHeader";let d=n.forwardRef(({className:e,...r},t)=>s.jsx("div",{ref:t,className:(0,a.cn)("font-semibold leading-none tracking-tight",e),...r}));d.displayName="CardTitle";let l=n.forwardRef(({className:e,...r},t)=>s.jsx("div",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",e),...r}));l.displayName="CardDescription";let u=n.forwardRef(({className:e,...r},t)=>s.jsx("div",{ref:t,className:(0,a.cn)("p-6 pt-0",e),...r}));u.displayName="CardContent",n.forwardRef(({className:e,...r},t)=>s.jsx("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",e),...r})).displayName="CardFooter"},93415:(e,r,t)=>{"use strict";t.d(r,{X:()=>i});var s=t(10326),n=t(77863),a=t(41291);function i({message:e="發生錯誤，請稍後再試",className:r}){return(0,s.jsxs)("div",{className:(0,n.cn)("flex items-center gap-2 rounded-md border border-destructive/50 bg-destructive/10 p-4 text-destructive",r),children:[s.jsx(a.Z,{className:"h-5 w-5"}),s.jsx("p",{className:"text-sm",children:e})]})}},37859:(e,r,t)=>{"use strict";t.d(r,{g:()=>a,h:()=>i});var s=t(10326),n=t(77863);function a({className:e,size:r="md"}){return s.jsx("div",{className:(0,n.cn)("flex items-center justify-center",e),children:s.jsx("div",{className:(0,n.cn)("animate-spin rounded-full border-2 border-muted border-t-foreground",{sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"}[r])})})}function i(){return s.jsx("div",{className:"flex min-h-screen items-center justify-center",children:s.jsx(a,{size:"lg"})})}},2234:(e,r,t)=>{"use strict";t.d(r,{gU:()=>a,iH:()=>i});var s=t(76),n=t(72824);async function a(e,r,t){try{let a=(0,s.JU)(n.db,e,r),i=function(e){let r={};for(let t in e)void 0!==e[t]&&(r[t]=e[t]);return r}(t);await (0,s.r7)(a,{...i,updatedAt:s.EK.now()})}catch(r){throw console.error(`Error updating document in ${e}:`,r),r}}async function i(e,r){try{let t=(0,s.JU)(n.db,e,r);await (0,s.oe)(t)}catch(r){throw console.error(`Error deleting document from ${e}:`,r),r}}},6173:(e,r,t)=>{"use strict";t.d(r,{w:()=>n});var s=t(17577);function n(e){let[r,t]=(0,s.useState)([]),[n,a]=(0,s.useState)(!0),[i,o]=(0,s.useState)(null);return{requests:r,loading:n,error:i}}t(76),t(72824),t(2234)},46132:(e,r,t)=>{"use strict";t.d(r,{Q:()=>a}),t(17577);var s=t(35047),n=t(71151);function a(e){let{user:r,loading:t}=(0,n.a)();return(0,s.useRouter)(),{user:r,loading:t}}},24211:(e,r,t)=>{"use strict";t.d(r,{b:()=>n});var s=t(72824);async function n(){let e=s.I.currentUser;if(!e)return null;try{return await e.getIdToken()}catch(e){return console.error("Error getting auth token:",e),null}}},68032:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(68570).createProxy)(String.raw`C:\Users\annie\OneDrive\Desktop\maan6si6uk1\app\(dashboard)\layout.tsx#default`)},37177:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(68570).createProxy)(String.raw`C:\Users\annie\OneDrive\Desktop\maan6si6uk1\app\(dashboard)\volunteer\layout.tsx#default`)},70738:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(68570).createProxy)(String.raw`C:\Users\annie\OneDrive\Desktop\maan6si6uk1\app\(dashboard)\volunteer\page.tsx#default`)}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[276,730,454,680],()=>t(11634));module.exports=s})();