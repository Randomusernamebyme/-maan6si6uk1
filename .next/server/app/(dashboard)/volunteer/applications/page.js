(()=>{var e={};e.id=603,e.ids=[603],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},84770:e=>{"use strict";e.exports=require("crypto")},80665:e=>{"use strict";e.exports=require("dns")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},35816:e=>{"use strict";e.exports=require("process")},76162:e=>{"use strict";e.exports=require("stream")},74026:e=>{"use strict";e.exports=require("string_decoder")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},98061:e=>{"use strict";e.exports=require("node:assert")},92761:e=>{"use strict";e.exports=require("node:async_hooks")},72254:e=>{"use strict";e.exports=require("node:buffer")},40027:e=>{"use strict";e.exports=require("node:console")},6005:e=>{"use strict";e.exports=require("node:crypto")},65714:e=>{"use strict";e.exports=require("node:diagnostics_channel")},15673:e=>{"use strict";e.exports=require("node:events")},88849:e=>{"use strict";e.exports=require("node:http")},42725:e=>{"use strict";e.exports=require("node:http2")},87503:e=>{"use strict";e.exports=require("node:net")},38846:e=>{"use strict";e.exports=require("node:perf_hooks")},39630:e=>{"use strict";e.exports=require("node:querystring")},84492:e=>{"use strict";e.exports=require("node:stream")},31764:e=>{"use strict";e.exports=require("node:tls")},41041:e=>{"use strict";e.exports=require("node:url")},47261:e=>{"use strict";e.exports=require("node:util")},93746:e=>{"use strict";e.exports=require("node:util/types")},24086:e=>{"use strict";e.exports=require("node:worker_threads")},65628:e=>{"use strict";e.exports=require("node:zlib")},65678:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d}),r(44819),r(37177),r(68032),r(35866),r(83733);var s=r(23191),a=r(88716),n=r(37922),i=r.n(n),o=r(95231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let d=["",{children:["(dashboard)",{children:["volunteer",{children:["applications",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,44819)),"C:\\Users\\annie\\OneDrive\\Desktop\\maan6si6uk1\\app\\(dashboard)\\volunteer\\applications\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,37177)),"C:\\Users\\annie\\OneDrive\\Desktop\\maan6si6uk1\\app\\(dashboard)\\volunteer\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,68032)),"C:\\Users\\annie\\OneDrive\\Desktop\\maan6si6uk1\\app\\(dashboard)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,83733)),"C:\\Users\\annie\\OneDrive\\Desktop\\maan6si6uk1\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\annie\\OneDrive\\Desktop\\maan6si6uk1\\app\\(dashboard)\\volunteer\\applications\\page.tsx"],u="/(dashboard)/volunteer/applications/page",p={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(dashboard)/volunteer/applications/page",pathname:"/volunteer/applications",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},16249:(e,t,r)=>{Promise.resolve().then(r.bind(r,49477))},58739:(e,t,r)=>{Promise.resolve().then(r.bind(r,33493))},49477:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var s=r(10326),a=r(36472),n=r(17577);r(76),r(72824),r(2234);var i=r(71151),o=r(37859),l=r(93415),d=r(33071),c=r(567),u=r(90772),p=r(20891),x=r(23424),m=r(24211),h=r(35047),f=r(72350),v=r(73427);function g(){let{user:e}=(0,i.a)(),{applications:t,loading:r,error:d}=(0,a.o)(e?.uid),[c,u]=(0,n.useState)("all"),m=e=>(0,p.WU)(e,"yyyy年MM月dd日 HH:mm",{locale:x.c}),h=t.filter(e=>"pending"===e.status),f=t.filter(e=>"approved"===e.status),g=t.filter(e=>"rejected"===e.status),j=t.filter(e=>"completed"===e.status),y="all"===c?t:"pending"===c?h:"approved"===c?f:"rejected"===c?g:j;return r?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(o.g,{size:"lg"})}):d?s.jsx(l.X,{message:"載入報名記錄時發生錯誤"}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[s.jsx("h2",{className:"text-2xl font-bold mb-2",children:"我的報名"}),s.jsx("p",{className:"text-muted-foreground",children:"以下是您已報名的委托記錄和狀態。"})]}),0===t.length?s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-muted-foreground",children:"您還沒有報名任何委托"})}):(0,s.jsxs)(v.mQ,{value:c,onValueChange:u,className:"w-full",children:[(0,s.jsxs)(v.dr,{className:"grid w-full grid-cols-5",children:[(0,s.jsxs)(v.SP,{value:"all",children:["全部 (",t.length,")"]}),(0,s.jsxs)(v.SP,{value:"pending",children:["待處理 (",h.length,")"]}),(0,s.jsxs)(v.SP,{value:"approved",children:["已選中 (",f.length,")"]}),(0,s.jsxs)(v.SP,{value:"rejected",children:["未選中 (",g.length,")"]}),(0,s.jsxs)(v.SP,{value:"completed",children:["已完成 (",j.length,")"]})]}),s.jsx(v.nU,{value:c,className:"mt-6",children:0===y.length?s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-muted-foreground",children:"all"===c?"您還沒有報名任何委托":`目前沒有${({pending:"待處理",approved:"已選中",rejected:"未選中",completed:"已完成"})[c]||c}的報名記錄`})}):s.jsx("div",{className:"space-y-4",children:y.map(e=>s.jsx(b,{application:e,formatDate:m},e.id))})})]})]})}function b({application:e,formatDate:t}){let{request:r,loading:a}=function(e){let[t,r]=(0,n.useState)(null),[s,a]=(0,n.useState)(!0),[i,o]=(0,n.useState)(null);return{request:t,loading:s,error:i}}(e.requestId),i=(0,h.useRouter)(),[l,p]=(0,n.useState)(!1),[x,v]=(0,n.useState)(!1),g=async()=>{try{v(!0);let t=await (0,m.b)();if(!t)throw Error("請先登入");let r=await fetch(`/api/applications/${e.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}});if(!r.ok){let e=await r.json();throw Error(e.error||"撤回失敗")}p(!1),i.refresh()}catch(e){alert("撤回失敗："+(e.message||"請稍後再試"))}finally{v(!1)}};return a?s.jsx(d.Zb,{children:s.jsx(d.aY,{className:"py-6",children:s.jsx(o.g,{size:"sm"})})}):r?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(d.Zb,{className:"border-2",children:[s.jsx(d.Ol,{children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[s.jsx(d.ll,{className:"text-lg",children:r.fields.join("、")}),s.jsx(c.C,{variant:{pending:"outline",approved:"default",rejected:"destructive",completed:"secondary"}[e.status]||"outline",children:{pending:"待處理",approved:"已選中",rejected:"未選中",completed:"已完成"}[e.status]||e.status})]})}),(0,s.jsxs)(d.aY,{className:"space-y-4",children:[s.jsx("div",{children:s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:r.description})}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"報名時間："}),s.jsx("span",{children:t(e.createdAt)})]}),e.availableTime&&(0,s.jsxs)("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"可服務時間："}),s.jsx("span",{children:e.availableTime})]}),e.matchedAt&&(0,s.jsxs)("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"配對時間："}),s.jsx("span",{children:t(e.matchedAt)})]}),e.completedAt&&(0,s.jsxs)("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"完成時間："}),s.jsx("span",{children:t(e.completedAt)})]})]}),e.message&&s.jsx("div",{className:"border-t pt-4",children:(0,s.jsxs)("p",{className:"text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"您的留言："}),e.message]})}),"approved"===e.status&&s.jsx("div",{className:"border-t pt-4",children:s.jsx("div",{className:"rounded-md bg-blue-50 dark:bg-blue-900/20 p-4 text-sm text-blue-800 dark:text-blue-200",children:"請留意 WhatsApp，團隊會聯絡你"})}),"pending"===e.status&&s.jsx("div",{className:"border-t pt-4",children:s.jsx(u.z,{variant:"outline",onClick:()=>p(!0),className:"w-full",children:"撤回報名"})})]})]}),s.jsx(f.Vq,{open:l,onOpenChange:p,children:(0,s.jsxs)(f.cZ,{children:[(0,s.jsxs)(f.fK,{children:[s.jsx(f.$N,{children:"確認撤回報名"}),s.jsx(f.Be,{children:"您確定要撤回此報名嗎？此操作無法復原。"})]}),(0,s.jsxs)(f.cN,{children:[s.jsx(u.z,{variant:"outline",onClick:()=>p(!1),disabled:x,children:"取消"}),s.jsx(u.z,{variant:"destructive",onClick:g,disabled:x,children:x?s.jsx(o.g,{size:"sm"}):"確認撤回"})]})]})})]}):null}},33493:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var s=r(10326),a=r(46132),n=r(37859),i=r(90434),o=r(35047),l=r(77863);function d({children:e}){let{user:t,loading:r}=(0,a.Q)("volunteer"),d=(0,o.usePathname)();return r?s.jsx(n.h,{}):(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold",children:"義工儀表板"}),t&&(0,s.jsxs)("p",{className:"text-muted-foreground mt-2",children:["歡迎回來，",t.displayName,"！"]})]}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-6",children:[s.jsx("aside",{className:"w-full md:w-64 flex-shrink-0",children:s.jsx("nav",{className:"space-y-1",children:[{href:"/volunteer/dashboard",label:"看板"},{href:"/volunteer/applications",label:"我的報名"},{href:"/volunteer/profile",label:"個人資料"}].map(e=>{let t=d===e.href;return s.jsx(i.default,{href:e.href,className:(0,l.cn)("block px-4 py-2 rounded-md text-sm font-medium transition-colors",t?"bg-primary text-primary-foreground":"text-foreground/60 hover:bg-accent hover:text-accent-foreground"),children:e.label},e.href)})})}),s.jsx("main",{className:"flex-1 min-w-0",children:e})]})]})}},567:(e,t,r)=>{"use strict";r.d(t,{C:()=>o});var s=r(10326);r(17577);var a=r(79360),n=r(77863);let i=(0,a.j)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o({className:e,variant:t,...r}){return s.jsx("div",{className:(0,n.cn)(i({variant:t}),e),...r})}},73427:(e,t,r)=>{"use strict";r.d(t,{mQ:()=>_,nU:()=>A,dr:()=>S,SP:()=>E});var s=r(10326),a=r(17577),n=r(82561),i=r(93095),o=r(15594),l=r(9815),d=r(77335),c=r(17124),u=r(52067),p=r(88957),x="Tabs",[m,h]=(0,i.b)(x,[o.Pc]),f=(0,o.Pc)(),[v,g]=m(x),b=a.forwardRef((e,t)=>{let{__scopeTabs:r,value:a,onValueChange:n,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:m="automatic",...h}=e,f=(0,c.gm)(l),[g,b]=(0,u.T)({prop:a,onChange:n,defaultProp:i??"",caller:x});return(0,s.jsx)(v,{scope:r,baseId:(0,p.M)(),value:g,onValueChange:b,orientation:o,dir:f,activationMode:m,children:(0,s.jsx)(d.WV.div,{dir:f,"data-orientation":o,...h,ref:t})})});b.displayName=x;var j="TabsList",y=a.forwardRef((e,t)=>{let{__scopeTabs:r,loop:a=!0,...n}=e,i=g(j,r),l=f(r);return(0,s.jsx)(o.fC,{asChild:!0,...l,orientation:i.orientation,dir:i.dir,loop:a,children:(0,s.jsx)(d.WV.div,{role:"tablist","aria-orientation":i.orientation,...n,ref:t})})});y.displayName=j;var N="TabsTrigger",q=a.forwardRef((e,t)=>{let{__scopeTabs:r,value:a,disabled:i=!1,...l}=e,c=g(N,r),u=f(r),p=P(c.baseId,a),x=C(c.baseId,a),m=a===c.value;return(0,s.jsx)(o.ck,{asChild:!0,...u,focusable:!i,active:m,children:(0,s.jsx)(d.WV.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":x,"data-state":m?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:p,...l,ref:t,onMouseDown:(0,n.Mj)(e.onMouseDown,e=>{i||0!==e.button||!1!==e.ctrlKey?e.preventDefault():c.onValueChange(a)}),onKeyDown:(0,n.Mj)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&c.onValueChange(a)}),onFocus:(0,n.Mj)(e.onFocus,()=>{let e="manual"!==c.activationMode;m||i||!e||c.onValueChange(a)})})})});q.displayName=N;var w="TabsContent",k=a.forwardRef((e,t)=>{let{__scopeTabs:r,value:n,forceMount:i,children:o,...c}=e,u=g(w,r),p=P(u.baseId,n),x=C(u.baseId,n),m=n===u.value,h=a.useRef(m);return a.useEffect(()=>{let e=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,s.jsx)(l.z,{present:i||m,children:({present:r})=>(0,s.jsx)(d.WV.div,{"data-state":m?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":p,hidden:!r,id:x,tabIndex:0,...c,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:r&&o})})});function P(e,t){return`${e}-trigger-${t}`}function C(e,t){return`${e}-content-${t}`}k.displayName=w;var D=r(77863);let _=b,S=a.forwardRef(({className:e,...t},r)=>s.jsx(y,{ref:r,className:(0,D.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",e),...t}));S.displayName=y.displayName;let E=a.forwardRef(({className:e,...t},r)=>s.jsx(q,{ref:r,className:(0,D.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",e),...t}));E.displayName=q.displayName;let A=a.forwardRef(({className:e,...t},r)=>s.jsx(k,{ref:r,className:(0,D.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));A.displayName=k.displayName},2234:(e,t,r)=>{"use strict";r.d(t,{gU:()=>n,iH:()=>i});var s=r(76),a=r(72824);async function n(e,t,r){try{let n=(0,s.JU)(a.db,e,t),i=function(e){let t={};for(let r in e)void 0!==e[r]&&(t[r]=e[r]);return t}(r);await (0,s.r7)(n,{...i,updatedAt:s.EK.now()})}catch(t){throw console.error(`Error updating document in ${e}:`,t),t}}async function i(e,t){try{let r=(0,s.JU)(a.db,e,t);await (0,s.oe)(r)}catch(t){throw console.error(`Error deleting document from ${e}:`,t),t}}},36472:(e,t,r)=>{"use strict";r.d(t,{o:()=>a});var s=r(17577);function a(e){let[t,r]=(0,s.useState)([]),[a,n]=(0,s.useState)(!0),[i,o]=(0,s.useState)(null);return{applications:t,loading:a,error:i}}r(76),r(72824),r(2234)},24211:(e,t,r)=>{"use strict";r.d(t,{b:()=>a});var s=r(72824);async function a(){let e=s.I.currentUser;if(!e)return null;try{return await e.getIdToken()}catch(e){return console.error("Error getting auth token:",e),null}}},44819:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(68570).createProxy)(String.raw`C:\Users\annie\OneDrive\Desktop\maan6si6uk1\app\(dashboard)\volunteer\applications\page.tsx#default`)},37177:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(68570).createProxy)(String.raw`C:\Users\annie\OneDrive\Desktop\maan6si6uk1\app\(dashboard)\volunteer\layout.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[276,730,454,680,594],()=>r(65678));module.exports=s})();