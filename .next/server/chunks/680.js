exports.id=680,exports.ids=[680],exports.modules={85493:(e,t,a)=>{Promise.resolve().then(a.bind(a,95289)),Promise.resolve().then(a.bind(a,69134))},8328:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,12994,23)),Promise.resolve().then(a.t.bind(a,96114,23)),Promise.resolve().then(a.t.bind(a,9727,23)),Promise.resolve().then(a.t.bind(a,79671,23)),Promise.resolve().then(a.t.bind(a,41868,23)),Promise.resolve().then(a.t.bind(a,84759,23))},95289:(e,t,a)=>{"use strict";a.d(t,{Header:()=>w});var s=a(10326),r=a(90434),n=a(71151),o=a(90772),i=a(17577),d=a(76234),l=a(39183),c=a(32933),m=a(53982),u=a(77863);let f=d.fC,h=d.xz;d.ZA,d.Uv,d.Tr,d.Ee,i.forwardRef(({className:e,inset:t,children:a,...r},n)=>(0,s.jsxs)(d.fF,{ref:n,className:(0,u.cn)("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...r,children:[a,s.jsx(l.Z,{className:"ml-auto"})]})).displayName=d.fF.displayName,i.forwardRef(({className:e,...t},a)=>s.jsx(d.tu,{ref:a,className:(0,u.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...t})).displayName=d.tu.displayName;let x=i.forwardRef(({className:e,sideOffset:t=4,...a},r)=>s.jsx(d.Uv,{children:s.jsx(d.VY,{ref:r,sideOffset:t,className:(0,u.cn)("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...a})}));x.displayName=d.VY.displayName;let p=i.forwardRef(({className:e,inset:t,...a},r)=>s.jsx(d.ck,{ref:r,className:(0,u.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",t&&"pl-8",e),...a}));p.displayName=d.ck.displayName,i.forwardRef(({className:e,children:t,checked:a,...r},n)=>(0,s.jsxs)(d.oC,{ref:n,className:(0,u.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:a,...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(d.wU,{children:s.jsx(c.Z,{className:"h-4 w-4"})})}),t]})).displayName=d.oC.displayName,i.forwardRef(({className:e,children:t,...a},r)=>(0,s.jsxs)(d.Rk,{ref:r,className:(0,u.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(d.wU,{children:s.jsx(m.Z,{className:"h-2 w-2 fill-current"})})}),t]})).displayName=d.Rk.displayName,i.forwardRef(({className:e,inset:t,...a},r)=>s.jsx(d.__,{ref:r,className:(0,u.cn)("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...a})).displayName=d.__.displayName,i.forwardRef(({className:e,...t},a)=>s.jsx(d.Z0,{ref:a,className:(0,u.cn)("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=d.Z0.displayName;var g=a(29798),v=a(79635),b=a(71810);function w(){let{user:e,logout:t,loading:a}=(0,n.a)(),i=async()=>{try{await t()}catch(e){console.error("登出失敗:",e)}};return s.jsx("header",{className:"sticky top-0 z-50 w-full border-b border-border bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,s.jsxs)("div",{className:"container flex h-16 items-center justify-between px-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-6",children:[s.jsx(r.default,{href:"/",className:"flex items-center space-x-2",children:s.jsx("span",{className:"text-xl font-bold",children:"堅城萬事屋"})}),(0,s.jsxs)("nav",{className:"hidden md:flex items-center gap-4",children:[(0,s.jsxs)(r.default,{href:"/",className:"text-sm font-medium transition-colors hover:text-foreground/80 text-foreground/60",children:[s.jsx(g.Z,{className:"h-4 w-4 inline mr-1"}),"首頁"]}),e&&(0,s.jsxs)(s.Fragment,{children:["volunteer"===e.role&&(0,s.jsxs)(s.Fragment,{children:[s.jsx(r.default,{href:"/volunteer/dashboard",className:"text-sm font-medium transition-colors hover:text-foreground/80 text-foreground/60",children:"看板"}),s.jsx(r.default,{href:"/volunteer/applications",className:"text-sm font-medium transition-colors hover:text-foreground/80 text-foreground/60",children:"我的報名"}),s.jsx(r.default,{href:"/volunteer/profile",className:"text-sm font-medium transition-colors hover:text-foreground/80 text-foreground/60",children:"個人資料"})]}),"admin"===e.role&&(0,s.jsxs)(s.Fragment,{children:[s.jsx(r.default,{href:"/admin",className:"text-sm font-medium transition-colors hover:text-foreground/80 text-foreground/60",children:"管理後台"}),s.jsx(r.default,{href:"/admin/requests",className:"text-sm font-medium transition-colors hover:text-foreground/80 text-foreground/60",children:"委托管理"}),s.jsx(r.default,{href:"/admin/volunteers",className:"text-sm font-medium transition-colors hover:text-foreground/80 text-foreground/60",children:"義工管理"})]})]})]})]}),s.jsx("div",{className:"flex items-center gap-4",children:a?s.jsx("div",{className:"h-8 w-8 animate-pulse rounded-full bg-muted"}):e?(0,s.jsxs)(f,{children:[s.jsx(h,{asChild:!0,children:(0,s.jsxs)(o.z,{variant:"ghost",className:"flex items-center gap-2",children:[s.jsx(v.Z,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:e.displayName}),(0,s.jsxs)("span",{className:"hidden sm:inline text-muted-foreground",children:["(","admin"===e.role?"管理員":"義工",")"]})]})}),(0,s.jsxs)(x,{align:"end",children:[s.jsx(p,{asChild:!0,children:(0,s.jsxs)(r.default,{href:"admin"===e.role?"/admin":"/volunteer/profile",className:"flex items-center",children:[s.jsx(v.Z,{className:"mr-2 h-4 w-4"}),"個人資料"]})}),(0,s.jsxs)(p,{onClick:i,children:[s.jsx(b.Z,{className:"mr-2 h-4 w-4"}),"登出"]})]})]}):(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx(o.z,{asChild:!0,variant:"ghost",size:"sm",children:s.jsx(r.default,{href:"/login",children:"登入"})}),s.jsx(o.z,{asChild:!0,size:"sm",children:s.jsx(r.default,{href:"/register",children:"註冊"})})]})})]})})}},90772:(e,t,a)=>{"use strict";a.d(t,{z:()=>l});var s=a(10326),r=a(17577),n=a(34214),o=a(79360),i=a(77863);let d=(0,o.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90 hover:text-primary-foreground",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),l=r.forwardRef(({className:e,variant:t,size:a,asChild:r=!1,...o},l)=>{let c=r?n.g7:"button";return s.jsx(c,{className:(0,i.cn)(d({variant:t,size:a,className:e})),ref:l,...o})});l.displayName="Button"},69134:(e,t,a)=>{"use strict";a.d(t,{AuthProvider:()=>l,a:()=>c});var s=a(10326),r=a(17577),n=a(35957),o=a(72824),i=a(76);let d=(0,r.createContext)(void 0);function l({children:e}){let[t,a]=(0,r.useState)(null),[l,c]=(0,r.useState)(null),[m,u]=(0,r.useState)(!0),f=async e=>{try{let t=await (0,i.QT)((0,i.JU)(o.db,"users",e));if(t.exists()){let e=t.data();return{...e,createdAt:e.createdAt instanceof Date?e.createdAt:new Date(e.createdAt),updatedAt:e.updatedAt instanceof Date?e.updatedAt:new Date(e.updatedAt)}}return null}catch(e){return console.error("Error fetching user data:",e),null}},h=async(e,t)=>{try{let a=await (0,n.e5)(o.I,e,t),s=await f(a.user.uid);c(s)}catch(e){throw Error(e.message||"登入失敗")}},x=async(e,t,a)=>{try{let s=await (0,n.Xb)(o.I,e,t),r={uid:s.user.uid,email:e,role:"volunteer",displayName:a.displayName||"",phone:a.phone||"",age:a.age||"",fields:a.fields||[],skills:a.skills||[],availability:a.availability||[],targetAudience:a.targetAudience||[],goals:a.goals,status:"pending",completedTasks:0,createdAt:new Date,updatedAt:new Date};await (0,i.pl)((0,i.JU)(o.db,"users",s.user.uid),{...r,createdAt:new Date,updatedAt:new Date}),s.user&&!s.user.emailVerified&&await (0,n.w$)(s.user),c(r)}catch(e){throw Error(e.message||"註冊失敗")}},p=async()=>{try{await (0,n.w7)(o.I),c(null)}catch(e){throw Error(e.message||"登出失敗")}},g=async e=>{try{await (0,n.LS)(o.I,e)}catch(e){throw Error(e.message||"發送密碼重置郵件失敗")}},v=async(e,a)=>{try{if(!t||!t.email)throw Error("請先登入");let s=n.w9.credential(t.email,e);await (0,n.aF)(t,s),await (0,n.gQ)(t,a)}catch(e){throw Error(e.message||"修改密碼失敗")}};return s.jsx(d.Provider,{value:{user:l,firebaseUser:t,loading:m,login:h,register:x,logout:p,sendPasswordReset:g,changePassword:v},children:e})}function c(){let e=(0,r.useContext)(d);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},72824:(e,t,a)=>{"use strict";let s;a.d(t,{I:()=>i,db:()=>d});var r=a(42585),n=a(35957),o=a(76);s=0===(0,r.C6)().length?(0,r.ZF)({apiKey:"AIzaSyCRZrcO60pVOmgG2PPE5j-OLAKnsyNQk6A",authDomain:"maan6si6uk1.firebaseapp.com",projectId:"maan6si6uk1",storageBucket:"maan6si6uk1.firebasestorage.app",messagingSenderId:"349293937280",appId:"1:349293937280:web:ca2f091d1107bae7e09c65",measurementId:"G-4LWCWNPHB2"}):(0,r.C6)()[0];let i=(0,n.v0)(s),d=(0,o.ad)(s)},71151:(e,t,a)=>{"use strict";a.d(t,{a:()=>s.a});var s=a(69134)},77863:(e,t,a)=>{"use strict";a.d(t,{cn:()=>n});var s=a(41135),r=a(31009);function n(...e){return(0,r.m6)((0,s.W)(e))}},83733:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c,metadata:()=>l});var s=a(19510),r=a(77366),n=a.n(r);a(67272);var o=a(68570);let i=(0,o.createProxy)(String.raw`C:\Users\annie\OneDrive\Desktop\maan6si6uk1\lib\contexts\AuthContext.tsx#AuthProvider`);(0,o.createProxy)(String.raw`C:\Users\annie\OneDrive\Desktop\maan6si6uk1\lib\contexts\AuthContext.tsx#useAuth`);let d=(0,o.createProxy)(String.raw`C:\Users\annie\OneDrive\Desktop\maan6si6uk1\components\layout\Header.tsx#Header`),l={title:"堅城萬事屋",description:"社區服務平台，連接需要幫助的委托者與願意提供服務的義工"};function c({children:e}){return(0,s.jsxs)("html",{lang:"zh-TW",children:[s.jsx("head",{children:s.jsx("script",{dangerouslySetInnerHTML:{__html:`
              // 忽略 MetaMask 錯誤
              window.addEventListener('error', function(e) {
                if (e.message && e.message.includes('MetaMask')) {
                  e.preventDefault();
                  return false;
                }
              });
              window.addEventListener('unhandledrejection', function(e) {
                if (e.reason && e.reason.message && e.reason.message.includes('MetaMask')) {
                  e.preventDefault();
                  return false;
                }
              });
            `}})}),s.jsx("body",{className:n().className,children:(0,s.jsxs)(i,{children:[s.jsx(d,{}),e]})})]})}},67272:()=>{}};